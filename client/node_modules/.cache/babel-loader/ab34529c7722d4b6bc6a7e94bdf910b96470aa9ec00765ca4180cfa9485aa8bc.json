{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/spotify-stories/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/user/spotify-stories/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/user/spotify-stories/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/user/spotify-stories/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/user/spotify-stories/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'bootstrap/dist/css/bootstrap.css';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchSong(_ref){var songObjects=_ref.songObjects,setSongObjects=_ref.setSongObjects,songList=_ref.songList,setSongList=_ref.setSongList,listInput=_ref.listInput,setListInput=_ref.setListInput;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchInput=_useState2[0],setSearchInput=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),accessToken=_useState4[0],setAccessToken=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),descInput=_useState6[0],setDescInput=_useState6[1];function search(){return _search.apply(this,arguments);}function _search(){_search=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var songParams,songResponse,songData,trackObj;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:songParams={method:'GET',headers:{'Content-Type':'application/json','Authorization':'Bearer '+accessToken}};_context.next=3;return fetch('https://api.spotify.com/v1/search?q='+searchInput+'&type=track',songParams);case 3:songResponse=_context.sent;_context.next=6;return songResponse.json();case 6:songData=_context.sent;if(songData.tracks.items.length>0){trackObj=songData.tracks.items[0];setSongObjects(function(prevTracks){return[].concat(_toConsumableArray(prevTracks),[_objectSpread(_objectSpread({},trackObj),{},{description:descInput})]);});setSearchInput(\"\");setDescInput(\"\");}else{alert(\"No results found\");}console.log(songObjects);case 9:case\"end\":return _context.stop();}},_callee);}));return _search.apply(this,arguments);}function addList(){setSongList(function(prevList){return[].concat(_toConsumableArray(prevList),[{songs:_toConsumableArray(songObjects),listName:listInput}]);});setSongObjects([]);setListInput(\"\");}useEffect(function(){var authParameters={method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:'grant_type=client_credentials&client_id='+process.env.REACT_APP_CLIENT_ID+'&client_secret='+process.env.REACT_APP_CLIENT_SECRET};fetch('https://accounts.spotify.com/api/token',authParameters).then(function(result){return result.json();}).then(function(data){return setAccessToken(data.access_token);});},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Song Name (More accurate when you search with the artist)\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Metallica - One\",onChange:function onChange(event){return setSearchInput(event.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlTextarea1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Add description to the song\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,placeholder:\"Best song I've ever heard..\",onChange:function onChange(event){return setDescInput(event.target.value);}})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:search,children:\"Add the song\"}),' ',/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:addList,children:\"Add list to profile\"}),' ',/*#__PURE__*/_jsx(Form.Label,{children:\"Name the list\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Cool List\",onChange:function onChange(event){return setListInput(event.target.value);}})]})});}export default SearchSong;","map":{"version":3,"names":["Form","Button","useState","useEffect","jsx","_jsx","jsxs","_jsxs","SearchSong","_ref","songObjects","setSongObjects","songList","setSongList","listInput","setListInput","_useState","_useState2","_slicedToArray","searchInput","setSearchInput","_useState3","_useState4","accessToken","setAccessToken","_useState5","_useState6","descInput","setDescInput","search","_search","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","songParams","songResponse","songData","trackObj","wrap","_callee$","_context","prev","next","method","headers","fetch","sent","json","tracks","items","length","prevTracks","concat","_toConsumableArray","_objectSpread","description","alert","console","log","stop","addList","prevList","songs","listName","authParameters","body","process","env","REACT_APP_CLIENT_ID","REACT_APP_CLIENT_SECRET","then","result","data","access_token","children","Group","className","controlId","Label","Control","type","placeholder","onChange","event","target","value","as","rows","variant","onClick"],"sources":["/Users/user/spotify-stories/src/components/SearchSong.js"],"sourcesContent":["import 'bootstrap/dist/css/bootstrap.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { useState, useEffect } from 'react';\n\n\n\n\nfunction SearchSong({ songObjects, setSongObjects, songList, setSongList, listInput, setListInput }) {\n    const [searchInput, setSearchInput] = useState(\"\");\n    const [accessToken, setAccessToken] = useState(\"\");\n    const [descInput, setDescInput] = useState(\"\");\n    \n    \n  \n    async function search(){\n      const songParams = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + accessToken\n        }\n      }\n      const songResponse = await fetch('https://api.spotify.com/v1/search?q=' + searchInput + '&type=track', songParams)\n      const songData = await songResponse.json()\n  \n      if (songData.tracks.items.length > 0) {\n        const trackObj = songData.tracks.items[0];\n        setSongObjects(prevTracks => [...prevTracks, {...trackObj, description: descInput}])\n        setSearchInput(\"\")\n        setDescInput(\"\")\n      } else {\n        alert(\"No results found\")\n      }\n      console.log(songObjects)\n    }\n  \n    function addList(){\n      setSongList(prevList => [...prevList, {songs: [...songObjects], listName: listInput}])\n      setSongObjects([])\n      setListInput(\"\")\n    }\n  \n    useEffect(() => {\n      const authParameters = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: 'grant_type=client_credentials&client_id=' + process.env.REACT_APP_CLIENT_ID + '&client_secret=' + process.env.REACT_APP_CLIENT_SECRET\n      }\n      fetch('https://accounts.spotify.com/api/token', authParameters)\n      .then(result => result.json())\n      .then(data => setAccessToken(data.access_token))\n    }, [])\n  \n    return (\n      <div>\n        <Form>\n        <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput1\">\n          <Form.Label>Song Name (More accurate when you search with the artist)</Form.Label>\n          <Form.Control type=\"text\" placeholder=\"Metallica - One\" \n          onChange={\n            event => setSearchInput(event.target.value)}\n          />\n        </Form.Group>\n        <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\n          <Form.Label>Add description to the song</Form.Label>\n          <Form.Control as=\"textarea\" rows={3} placeholder=\"Best song I've ever heard..\"\n          onChange={\n            event => setDescInput(event.target.value)\n          }\n          />\n        </Form.Group>\n        <Button variant=\"primary\" onClick={search}>Add the song</Button>{' '}\n        <Button variant=\"success\" onClick={addList}>Add list to profile</Button>{' '}\n        <Form.Label>Name the list</Form.Label>\n          <Form.Control type=\"text\" placeholder=\"Cool List\" \n          onChange={\n            event => setListInput(event.target.value)}\n          />\n      </Form>\n      </div>\n    );\n  }\n  \nexport default SearchSong;  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}